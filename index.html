<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8" />
<meta name="viewport" content="width=device-width, initial-scale=1.0" />
<title>Startpage</title>
<style>
:root{
  --bg:#1a1a1a;
  --text:#e7e7e7;
  --accent:#3d7fff;
  --night:#333;
  font-family:"Inter",system-ui,sans-serif;
}
*{margin:0;padding:0;box-sizing:border-box}
body{min-height:100vh;background:var(--bg);color:var(--text);padding:1rem;}

#wrap{display:flex;flex-direction:column;align-items:center;width:100%;max-width:1200px;margin:0 auto;gap:2rem;}

/* main clock and date */
#main-clock{text-align:center;margin-bottom:1rem;}
#main-time{font-size:clamp(3rem,8vw,6rem);font-weight:300;letter-spacing:.1em;line-height:1;}
#main-date{font-size:clamp(1rem,2.5vw,1.5rem);color:#aaa;margin-top:.5rem;}

/* world clocks */
#clocks{display:flex;gap:.5rem;width:100%;justify-content:center;flex-wrap:wrap;margin-bottom:1rem;}
.clock{flex:1 1 auto;min-width:90px;max-width:150px;display:flex;flex-direction:column;align-items:center;gap:.1rem;cursor:default;user-select:none;}
.clock .city{font-weight:600;font-size:clamp(.9rem,2vw,1.1rem);}
.clock .time{font-size:clamp(1.1rem,2.5vw,1.4rem);letter-spacing:.4px;}
.clock.night .time,.clock.night .city{color:var(--night);} 

/* main content area */
#main{display:grid;grid-template-columns:1fr 2fr;gap:2rem;width:100%;align-items:start;}

/* pantone swatch */
#swatch{
  width:100%;
  max-width:280px;
  aspect-ratio:1;
  border-radius:8px;
  position:relative;
  overflow:hidden;
  background:var(--bg);
  box-shadow:0 0 0 2px white inset;
  display:flex;
  flex-direction:column;
  justify-content:flex-end;
  cursor:pointer;
}
#swatch .color-area{
  flex:1;
  width:100%;
  background:transparent;
  transition:background .3s;
}
#pantone-info{
  padding:.8rem;
  font-size:clamp(.9rem,2vw,1rem);
  background:white;
  color:black;
  text-align:left;
  font-weight:500;
  user-select:none;
}
#pantone-info .pantone-label{
  font-size:clamp(1.2rem,3vw,1.4rem);
  font-weight:700;
  display:block;
  margin-bottom:.1rem;
}
#copy-toast{
  position:absolute;
  top:8px;right:8px;
  background:rgba(0,0,0,.6);
  color:white;
  font-size:.7rem;
  padding:.25rem .4rem;
  border-radius:4px;
  opacity:0;
  transition:opacity .3s;
  pointer-events:none;
}

/* right column content */
#right-col{display:flex;flex-direction:column;gap:1.5rem;width:100%;}

/* links */
#links{display:grid;grid-template-columns:repeat(3,1fr);gap:1rem .75rem;width:100%;}
#links a{
  text-decoration:none;
  color:var(--text);
  font-size:clamp(.95rem,2vw,1.1rem);
  padding:.5rem 0;
  transition:color .2s;
  display:flex;
  align-items:center;
  gap:.5rem;
  text-align:left;
}
#links a:hover{color:var(--accent);}
#links a .icon{width:16px;height:16px;flex-shrink:0;}
#links a .key{text-decoration:underline;}

/* weather */
#weather{display:grid;grid-template-columns:repeat(auto-fit,minmax(80px,1fr));gap:.2rem;width:100%;font-size:clamp(.8rem,1.8vw,.9rem);margin-top:1rem;}
.day{display:flex;flex-direction:column;align-items:center;gap:.15rem;padding:.5rem .3rem;background:transparent;aspect-ratio:3/4;}
.day svg{width:clamp(24px,5vw,30px);height:clamp(24px,5vw,30px);stroke:var(--text);stroke-width:2px;fill:none;}
.day .temps{font-weight:600;font-size:.8rem;}

/* responsive adjustments */
@media (max-width: 768px) {
  #main{grid-template-columns:1fr;gap:1.5rem;}
  #swatch{max-width:240px;margin:0 auto;}
  #links{grid-template-columns:repeat(2,1fr);}
  #weather{grid-template-columns:repeat(7,1fr);}
}

@media (max-width: 480px) {
  body{padding:.5rem;}
  #wrap{gap:1.5rem;}
  #clocks{gap:.25rem;}
  .clock{min-width:70px;}
  #links{grid-template-columns:1fr;}
  #weather{grid-template-columns:repeat(4,1fr);}
}
</style>
<script src="https://unpkg.com/feather-icons"></script>
</head>
<body>
  <div id="wrap">
    <!-- Main Clock and Date -->
    <div id="main-clock">
      <div id="main-time">--:--</div>
      <div id="main-date">--</div>
    </div>

    <!-- World Clocks -->
    <div id="clocks">
			<div class="clock" data-offset="9"><span class="city">Tokyo</span><span class="time">--:--</span></div>
      <div class="clock" data-offset="-7"><span class="city">Seattle</span><span class="time">--:--</span></div>
			<div class="clock" data-offset="2"><span class="city">Paris</span><span class="time">--:--</span></div>
			<div class="clock" data-offset="3"><span class="city">Minsk</span><span class="time">--:--</span></div>
    </div>

    <!-- Main content area -->
    <div id="main">
      <!-- Pantone swatch -->
      <div id="swatch">
        <div class="color-area" id="swatch-color"></div>
        <div id="pantone-info"></div>
        <span id="copy-toast">copied!</span>
      </div>

      <!-- Right column -->
      <div id="right-col">
        <div id="links">
          <a href="https://bsky.app" data-key="b">
            <i data-feather="twitter" class="icon"></i>
            <span><span class="key">B</span>luesky</span>
          </a>
          <a href="https://calendar.google.com" data-key="c">
            <i data-feather="calendar" class="icon"></i>
            <span><span class="key">C</span>alendar</span>
          </a>
          <a href="https://chat.openai.com" data-key="p">
            <i data-feather="message-circle" class="icon"></i>
            <span>Chat<span class="key">G</span>PT</span>
          </a>
          <a href="https://feedly.com" data-key="f">
            <i data-feather="rss" class="icon"></i>
            <span><span class="key">F</span>eedly</span>
          </a>
          <a href="https://github.com" data-key="g">
            <i data-feather="github" class="icon"></i>
            <span><span class="key">G</span>itHub</span>
          </a>
          <a href="https://mail.google.com" data-key="m">
            <i data-feather="mail" class="icon"></i>
            <span><span class="key">M</span>ail</span>
          </a>
          <a href="https://cad.onshape.com" data-key="o">
            <i data-feather="box" class="icon"></i>
            <span><span class="key">O</span>nShape</span>
          </a>
          <a href="https://reddit.com" data-key="r">
            <i data-feather="message-square" class="icon"></i>
            <span><span class="key">R</span>eddit</span>
          </a>
          <a href="https://youtube.com" data-key="y">
            <i data-feather="play" class="icon"></i>
            <span><span class="key">Y</span>ouTube</span>
          </a>
        </div>
      </div>
    </div>

    <!-- Weather forecast -->
    <div id="weather"></div>
  </div>
  
<script>
/****************** SETTINGS *****************/
const settings={
  coords:{lat:33.9316,lon:-84.0177},
};

/****************** MAIN CLOCK *****************/
function updateMainClock(){
  const now = new Date();
  const time = now.toLocaleTimeString('en-US', {hour12: false, hour: '2-digit', minute: '2-digit'});
  const date = now.toLocaleDateString('en-US', {weekday: 'long', year: 'numeric', month: 'long', day: 'numeric'});
  document.getElementById('main-time').textContent = time;
  document.getElementById('main-date').textContent = date;
}
setInterval(updateMainClock, 1000);
updateMainClock();

/****************** PANTONE COLOR *****************/
let currentPantone;
function pantoneForToday(){
  const d=new Date().toISOString().split('T')[0];
  const h=[...d].reduce((a,c)=>a+c.charCodeAt(0),0)%360;
  const s=60,l=50;
  const hex=hslToHex(h,s,l);
  return{hsl:`hsl(${h},${s}%,${l}%)`,hex,name:`Pantone ${h}-${s}-${l}`,hue:h,sat:s,light:l};
}
function hslToHex(h,s,l){
  s/=100;l/=100;
  const k=n=>(n+h/30)%12;
  const a=s*Math.min(l,1-l);
  const f=n=>Math.round((l-a*Math.max(-1,Math.min(k(n)-3,Math.min(9-k(n),1))))*255).toString(16).padStart(2,'0');
  return`#${f(0)}${f(8)}${f(4)}`.toUpperCase();
}
function flashCopy(){
  const toast=document.getElementById('copy-toast');
  toast.style.opacity=1;
  setTimeout(()=>toast.style.opacity=0,1000);
}
function renderPantone(){
  currentPantone=pantoneForToday();
  const colorArea=document.getElementById('swatch-color');
  colorArea.style.background=`linear-gradient(rgba(128,128,128,0.25), rgba(128,128,128,0.25)), ${currentPantone.hsl}`;
  document.getElementById('pantone-info').innerHTML=`<span class="pantone-label">PANTONE</span>${currentPantone.name.replace('Pantone ', '')} – ${currentPantone.hex}`;
  
  // Update body background with transparent version of pantone color over dark grey
  const transparentPantoneColor = `hsla(${currentPantone.hue}, ${Math.max(currentPantone.sat - 30, 15)}%, ${Math.max(currentPantone.light - 30, 10)}%, 0.08)`;
  document.body.style.background = `linear-gradient(${transparentPantoneColor}, ${transparentPantoneColor}), #0f0f0f`;
}
renderPantone();
document.getElementById('swatch').addEventListener('click',()=>{
  navigator.clipboard.writeText(currentPantone.hex).then(flashCopy);
});

/****************** CLOCKS *****************/
function updateClocks(){
  document.querySelectorAll('.clock').forEach(cl=>{
    const off=+cl.dataset.offset;
    const utc=Date.now()+new Date().getTimezoneOffset()*60000;
    const t=new Date(utc+3600000*off);
    const h=t.getHours().toString().padStart(2,'0');
    const m=t.getMinutes().toString().padStart(2,'0');
    cl.querySelector('.time').textContent=`${h}:${m}`;
    cl.classList.toggle('night',h>=18||h<6);
  });
}
setInterval(updateClocks,1000);updateClocks();

/****************** WEATHER (weather.gov) *****************/
const iconMap={Sun:"sun",Clear:"sun",Cloud:"cloud",Overcast:"cloud",Rain:"cloud-rain",Showers:"cloud-drizzle",Thunder:"cloud-lightning",Snow:"cloud-snow",Fog:"cloud"};
async function loadWeather(){
  const {lat,lon}=settings.coords;
  const w=document.getElementById('weather');
  try{
    const p=await fetch(`https://api.weather.gov/points/${lat},${lon}`).then(r=>r.json());
    const fc=await fetch(p.properties.forecast).then(r=>r.json());
    const periods=fc.properties.periods;
    const daily={};
    periods.forEach(per=>{
      const d=per.startTime.split('T')[0];
      daily[d]=daily[d]||{hi:null,lo:null,cond:per.shortForecast};
      per.isDaytime?daily[d].hi=per.temperature:daily[d].lo=per.temperature;
    });
    const today=new Date().toISOString().split('T')[0];
    const days=Object.keys(daily).filter(d=>d>=today).slice(0,7);
    w.innerHTML='';
    days.forEach(d=>{
      const o=daily[d];
      const dt=new Date(d);
      const wd=dt.toLocaleDateString([], {weekday:'short'});
      const md=dt.toLocaleDateString([], {month:'numeric',day:'numeric'});
      const key=Object.keys(iconMap).find(k=>o.cond.includes(k))||'Cloud';
      const icon=iconMap[key];
      w.insertAdjacentHTML('beforeend',`<div class='day'><div>${wd}</div><div>${md}</div><i data-feather='${icon}'></i><div class='temps'>${o.hi??'-'}° / ${o.lo??'-'}°</div></div>`);
    });
    feather.replace();
  }catch(e){
    console.warn('weather',e);
    w.innerHTML=`<span style='font-size:.85rem'>⚠️ weather unavailable <button onclick='loadWeather()'>↻</button></span>`;
  }
}
loadWeather();

/****************** KEYBOARD SHORTCUTS *****************/
document.addEventListener('keydown',e=>{
  if(e.target.closest('input,textarea')) return; // don't hijack typing
  const link = document.querySelector(`#links a[data-key="${e.key}"]`);
  if(link) {
    window.open(link.href,'_blank');
    e.preventDefault();
  }
});

// Initialize feather icons
feather.replace();
</script>
</body>
</html>
